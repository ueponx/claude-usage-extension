# Claude使用量チェッカー Chrome拡張機能

Claude.aiの使用量を簡単に確認できるChrome拡張機能です。

## 📦 インストール方法

### 1. ファイルの準備

すべてのファイルが同じフォルダに入っていることを確認してください：

```
claude-usage-extension/
├── manifest.json
├── popup.html
├── popup.js
├── styles.css
├── content.js
├── background.js
├── icons/
│   ├── icon16.png
│   ├── icon48.png
│   └── icon128.png
└── README.md
```

### 2. アイコンの作成

アイコン画像が必要です。以下のいずれかの方法で作成してください：

#### 方法1: オンラインツールで作成
- https://www.favicon-generator.org/
- https://realfavicongenerator.net/

#### 方法2: 簡単なアイコンを自作
以下のSVGコードをコピーして、オンラインSVG to PNGコンバーターで変換してください：

```svg
<svg xmlns="http://www.w3.org/2000/svg" width="128" height="128" viewBox="0 0 128 128">
  <rect width="128" height="128" rx="20" fill="#6b6bff"/>
  <text x="64" y="85" font-family="Arial" font-size="70" font-weight="bold" fill="white" text-anchor="middle">C</text>
</svg>
```

- 128x128で保存 → icons/icon128.png
- 48x48で保存 → icons/icon48.png
- 16x16で保存 → icons/icon16.png

**注意**: iconsディレクトリを作成して、その中にアイコンを保存してください。

### 3. Chromeにインストール

1. Chromeを開き、アドレスバーに `chrome://extensions/` と入力してEnter
2. 右上の **「デベロッパーモード」** をONにする
3. **「パッケージ化されていない拡張機能を読み込む」** をクリック
4. `claude-usage-extension` フォルダを選択

## 🚀 使い方

Claude.aiのページを開くと、**右上に自動でフローティングウィジェットが表示**されます。

### フローティングウィジェットの操作
- **ドラッグ**して好きな位置に移動できます
- **🔄ボタン**で手動更新（使用量ページでのみ）
- **−ボタン**で折りたたみ/展開
- **×ボタン**で非表示
- 5分ごとに自動で使用量を更新（使用量ページのみ）

### ウィジェットを再表示する方法
ウィジェットを×ボタンで閉じた場合：
- **ツールバーの拡張機能アイコンをクリック**
  - ウィジェットがすぐに再表示されます
  - ページを開いてすぐの場合は、次回アクセス時に表示されます
- または、**ページをリロード**（Ctrl+R / Cmd+R）すると再表示されます

## ✨ 機能

- ✅ **ページ上にフローティング表示** - Claude.aiのページに常時表示
- ✅ **Current Session** の使用量を表示
- ✅ **All Models**（週間制限）の使用量を表示
- ✅ **Opus Only** の使用量を表示
- ✅ リセット時間の表示
- ✅ 視覚的なプログレスバー
- ✅ ダークモード対応の美しいUI
- ✅ **ドラッグ移動可能** - 好きな位置に配置
- ✅ **折りたたみ機能** - コンパクトに表示
- ✅ **位置を記憶** - 次回も同じ位置に表示
- ✅ 5分ごとの自動更新（使用量ページのみ）
- ✅ データのキャッシュ（最後に取得した情報を保存）

## 📸 表示方法

Claude.aiのページ上にフローティングウィジェットが常時表示され、以下の情報が確認できます：
- Current Sessionの使用率とリセット時間
- All Modelsの使用率とリセット時間
- Opus Onlyの使用率とリセット時間
- ドラッグで自由に移動可能
- 折りたたんでコンパクト表示も可能

## 🔧 トラブルシューティング

### フローティングウィジェットが表示されない場合

1. ページを**リロード**してください（Ctrl+R / Cmd+R）
2. 拡張機能が有効になっているか `chrome://extensions/` で確認
3. Claude.aiのページ（https://claude.ai/*）にいることを確認

### ウィジェットを×で閉じた後、再表示したい場合

**方法1: アイコンをクリック**
1. **ツールバーの拡張機能アイコンをクリック**
2. すぐに表示される場合と、次回アクセス時に表示される場合があります

**方法2: ページをリロード**
1. ページをリロード（Ctrl+R / Cmd+R）
2. ウィジェットが再表示されます

### 初回アクセス時にウィジェットが表示されない場合

1. ページを**リロード**してください
2. 拡張機能のcontent scriptが読み込まれるまで数秒かかる場合があります

### ウィジェットの位置をリセットしたい場合

1. F12キーで開発者ツールを開く
2. Consoleタブで以下を実行：
   ```javascript
   chrome.storage.local.remove(['widgetPosition'])
   ```
3. ページをリロード

### データが表示されない場合

1. **必ず https://claude.ai/settings/usage を開いてください**
2. ページが**完全に読み込まれる**まで待ちます（使用量のバーが表示されるまで）
3. フローティングウィジェットの「🔄」ボタンをクリック
4. それでもダメな場合：
   - F12キーを押して開発者ツールを開く
   - Consoleタブを確認してエラーメッセージを確認
   - ページをリロード（Ctrl+R / Cmd+R）してから再度試す

### 拡張機能が動作しない場合

1. `chrome://extensions/` を開く
2. **Claude使用量チェッカー** の **再読み込み** ボタンをクリック
3. Claude.aiのタブを再読み込み
4. それでもダメな場合は、拡張機能を削除して再インストール

### 「データの取得に失敗しました」と表示される場合

1. **必ず claude.ai/settings/usage ページを開いていることを確認**
2. ページが完全に読み込まれるまで数秒待つ
3. 拡張機能のアイコンをクリックして「🔄 更新」
4. F12キーで開発者ツールを開き、Consoleでエラーを確認
5. ページをリロードしてから再試行

### エラーメッセージが表示される場合

- Claude.aiのページ構造が変更された可能性があります
- 最新版のChromeを使用しているか確認してください
- 拡張機能を一度削除して、再インストールしてみてください

## ⚙️ カスタマイズ

### フローティングウィジェットの見た目を変更
`floating-widget.css` を編集することで、色やサイズをカスタマイズできます。

### フローティングウィジェットの更新頻度を変更
`floating-widget.js` の以下の部分を編集：

```javascript
// 5分ごとに自動更新 → 好きな時間に変更
updateInterval = setInterval(fetchUsageData, 5 * 60 * 1000); // ミリ秒単位
```

### バックグラウンド自動更新の頻度変更
`background.js` の以下の部分を編集：

```javascript
chrome.alarms.create('updateUsage', { periodInMinutes: 15 }); // 15を好きな数値に変更
```

## ⚠️ 注意事項

- この拡張機能はClaude.aiのページ構造に依存しています
- Claude.aiのUIが変更された場合、動作しなくなる可能性があります
- データはブラウザのローカルストレージにのみ保存されます
- 他のユーザーとデータを共有することはありません
- 非公式の拡張機能です（Anthropic公式ではありません）

## 📝 ライセンス

このプロジェクトはMITライセンスの下で公開されています。

## 🤝 貢献

バグ報告や機能追加の提案は歓迎します！

---

**作成日**: 2025年10月17日  
**対応ブラウザ**: Google Chrome, Microsoft Edge, Brave（Chromiumベース）
